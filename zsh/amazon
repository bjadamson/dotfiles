# Amazon specific paths.
export PATH=$PATH:/apollo/env/SDETools/bin/
export PATH=$PATH:/apollo/env/envImprovement/bin/
export PATH=$PATH:/apollo/env/eclipse-4.2/bin/
export PATH=$PATH:/apollo/env/BrazilThirdPartyTool/bin/

export CR_AUTHCLOSE_OPT_OUT=true

alias kp='kinit -f $@'
alias app='sudo /apollo/bin/runCommand -a Preactivate -e $@'
alias apa='sudo /apollo/bin/runCommand -a Activate -e $@'
alias apd='sudo /apollo/bin/runCommand -a Deactivate -e $@'

# C++ debugging fn
alias debug-test=debug_test_executable
function debug_test_executable() {
  export LD_LIBRARY_PATH=$(brazil-path testrun.lib)
  /apollo/env/GDBStandalone/bin/gdb "$(pwd)/build/test/$@"
}

# quick nav
alias cdbe='cd /home/badamson/workspace/daemon/src/AaaBeCppDaemon/'

# brazil-build
alias assh='/home/badamson/assh $@'
alias bb='brazil-build $@'
alias bbap='bb apollo-pkg $@'
alias bbc='bb clean'
alias cbb='clear && bb'
alias bbg='bb gdb $@'
alias bbf='bb format'
alias bbt='bb test'
alias bbs='bb server $@'
alias bba='bbc && bb && bbt'
alias bbr='bb release'
alias bws='brazil ws --sync --md'
alias bwsr='brazil ws --remove -p $@'
alias bwsa='brazil ws --use -p $@'
alias bvs='brazil ws --use -vs $@'
alias bbtia='bb test-integration-assert'
alias sb='ssh badamson.desktop.amazon.com'
alias sbb='ssh badamson.aka.corp.amazon.com'

alias bbq=build-quiet
function build-quiet() {
  export MAKE_OUTPUT_LEVEL=QUIET
  bb
}

alias bbrq=build-release-quiet
function build-release-quiet() {
  export MAKE_OUTPUT_LEVEL=QUIET
  bbc; bbr
}

alias rm-ap-env=remove-apollo-env
function remove-apollo-env() {
  set -x
  sudo rm -rf /apollo/env/"$1"*
  sudo rm -rf /apollo/_env/"$1"*
  sudo rm -rf /apollo/var/env/"$1"*
}

alias mv-cxx-file=move-cxx-file
function move-cxx-file() {
  mv '"$1".h' '"$2".h.'
  mv '"$1".cpp' '"$2".cpp'
  rr '"$3""$1".h' '"$4""$1".h'
}

alias cxx-insert-nested-ns=cxx-insert-nested-ns
function cxx-insert-nested-ns() {
  sed -e '/namespace '$1' {/a namespace '$2' {' $3 -e \
    '/}[ ]*\/\/ '$1'/a } \/\/ '$2'' $3
}

alias cxx-insert-nested-ns-dir=cxx-insert-nested-ns-dir
function cxx-insert-nested-ns-dir() {
  for f in $3*.h; do
    cxx-insert-nested-ns $1 $2 $f
  done
  for f in $3*.cpp; do
    cxx-insert-nested-ns $1 $2 $f
  done
}

alias bcpc=clear_brazil_pkg_cache
function clear_brazil_pkg_cache() {
  sudo mv /local/brazil-pkg-cache /local/brazil-pkg-cache-deprecated
  sudo rm -rf /local/brazil-pkg-cache-deprecated/* &
  sudo mkdir -p /local/brazil-pkg-cache/packages
  sudo chown builder:amazon /local/brazil-pkg-cache
  sudo chown builder:amazon /local/brazil-pkg-cache/packages
}
